<div class="centered">
    <h1>Loans</h1>
    <div class="mdc-data-table">
        <div class="mdc-data-table__table-container">
        <table class="mdc-data-table__table" aria-label="Loans">
            <thead>
            <tr class="mdc-data-table__header-row">
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Lender</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Borrower</th>
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Book(s)</th>
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Start Date</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">End Date</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Status</th>
            </tr>
            </thead>
            <tbody class="mdc-data-table__content" *ngFor="let loan of loans">
            <tr class="mdc-data-table__row">
                <th class="mdc-data-table__cell" scope="row">{{loan.id}}</th>
                <th class="mdc-data-table__cell" scope="row">{{loan.lender.username}}</th>
                <th class="mdc-data-table__cell" scope="row">{{loan.borrower.username}}</th>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric" ><p class="noPadding" *ngFor="let ownedBook of loan.loanedBooks">{{ownedBook.book.title}}</p></td>            
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{loan.startDate | localtime:'date'}}</td>
                <td class="mdc-data-table__cell">{{loan.endDate | localtime:'date'}}</td>
                <td class="mdc-data-table__cell">{{loan.status}}</td>      
            </tr>
            </tbody>
        </table>
        </div>
    </div>

    <h2>Loan Requests</h2>
    <div class="mdc-data-table">
        <div class="mdc-data-table__table-container">
        <table class="mdc-data-table__table" aria-label="Loans">
            <thead>
            <tr class="mdc-data-table__header-row">
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">ID</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Borrower</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Message</th>
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Book(s)</th>
                <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">Start Date</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">End Date</th>
                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Approval?</th>
            </tr>
            </thead>
            <tbody class="mdc-data-table__content" *ngFor="let loan of pendingLoans">
            <tr class="mdc-data-table__row">
                <th class="mdc-data-table__cell" scope="row">{{loan.id}}</th>
                <th class="mdc-data-table__cell" scope="row">{{loan.borrower.username}}</th>
                <th class="mdc-data-table__cell" scope="row">{{loan.message}}</th>
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric" ><p class="noPadding" *ngFor="let ownedBook of loan.loanedBooks">{{ownedBook.book.title}}</p></td>            
                <td class="mdc-data-table__cell mdc-data-table__cell--numeric">{{loan.startDate | localtime:'date'}}</td>
                <td class="mdc-data-table__cell">{{loan.endDate | localtime:'date'}}</td>
                <td class="mdc-data-table__cell">
                    <button class="mat-button approve" (click)="updateLoanStatus(loan.id, 2)" >Approve</button>
                    <br/>
                    <button class="mat-button deny" (click)="updateLoanStatus(loan.id, 3)" >Deny</button>
                </td>      
            </tr>
            </tbody>
        </table>
        </div>
    </div>
</div>